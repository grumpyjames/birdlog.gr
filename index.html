<!DOCTYPE html>
<html>
 <head>
  <script src="elm.js" type="text/javascript"></script>
  <style>
    * {
    -moz-user-select: none;
    -khtml-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    font-family: Georgia, serif;
    font-size: 20px;
    }

    div .tick:after {
      content: '\2714';
    }

    .location:after {
      content: '\2316';
    }
  </style>
 </head>
 <body style="margin: 0 auto;">
  <script type="text/javascript">
var isHdpi = !!window.devicePixelRatio && window.devicePixelRatio > 1;
var myapp = Elm.fullscreen(Elm.SlippyMap, 
                           { 
                               hdpi: isHdpi, 
                               initialWinX: window.innerWidth,
                               initialWinY: window.innerHeight,
                               location: null,
                               locationError: null
                           });

function requestPosition()
{
    navigator.geolocation.getCurrentPosition(
        function(position) {
            myapp.ports.location.send([position.coords.latitude, position.coords.longitude]);
        },
        function(err) {
            myapp.ports.locationError.send("Fail");
        }
    );
}

myapp.ports.requestLocation.subscribe(requestPosition);
  </script>
 </body>
</html>
